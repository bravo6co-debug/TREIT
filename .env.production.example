# 프로덕션 환경 설정
# 배포 시 사용되는 환경변수들 (보안이 중요!)

# ===========================================
# 클라이언트 환경변수 (VITE_ 접두사 필수)
# ===========================================

# Supabase 프로덕션 서버
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your-production-anon-key

# 프로덕션 애플리케이션 URLs
VITE_USER_APP_URL=https://app.tre-it.com
VITE_ADVERTISER_APP_URL=https://advertiser.tre-it.com
VITE_ADMIN_APP_URL=https://admin.tre-it.com

# 애플리케이션 이름
VITE_USER_APP_NAME=TreitMaster
VITE_ADVERTISER_APP_NAME=TreitMaster 광고주
VITE_ADMIN_APP_NAME=TreitMaster 관리자

# Auth 리다이렉트 URLs
VITE_AUTH_REDIRECT_URL=https://app.tre-it.com/auth/callback
VITE_AUTH_SITE_URL=https://app.tre-it.com

# 외부 서비스 (프로덕션 공개 키만)
VITE_GOOGLE_OAUTH_CLIENT_ID=your-production-google-client-id
VITE_ANALYTICS_PUBLIC_KEY=your-production-analytics-public-key

# 환경 설정
VITE_NODE_ENV=production

# 디버그 및 로깅 (프로덕션에서 비활성화)
VITE_DEBUG_MODE=false
VITE_ENABLE_LOGGING=false

# 기능 플래그 (안정적인 기능만 활성화)
VITE_FEATURE_REFERRAL_SYSTEM=true
VITE_FEATURE_LEVEL_SYSTEM=true
VITE_FEATURE_SOCIAL_LOGIN=true

# Rate Limiting 표시 정보
VITE_RATE_LIMIT_DISPLAY_INFO=false

# ===========================================
# 서버 환경변수 (절대 클라이언트 노출 금지)
# ===========================================

# ⚠️ 중요: 아래 변수들은 서버 사이드에서만 사용
# 클라이언트 빌드에 포함되지 않도록 VITE_ 접두사 없음

# Supabase 프로덕션 서버 (민감한 키)
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your-production-service-role-key
SUPABASE_JWT_SECRET=your-production-jwt-secret-key-minimum-32-characters

# 프로덕션 데이터베이스
SUPABASE_DB_URL=postgresql://postgres:your-password@db.your-project.supabase.co:5432/postgres
SUPABASE_DB_PASSWORD=your-secure-database-password

# Supabase 서비스 URLs
SUPABASE_STORAGE_URL=https://your-project.supabase.co/storage/v1
SUPABASE_FUNCTIONS_URL=https://your-project.supabase.co/functions/v1

# 프로젝트 식별자
SUPABASE_PROJECT_REF=your-project-ref
SUPABASE_PROJECT_ID=your-project-id

# 실제 결제 게이트웨이 (민감한 키들)
PAYMENT_GATEWAY_URL=https://api.payment-provider.com
PAYMENT_GATEWAY_KEY=pk_live_your_publishable_key
PAYMENT_GATEWAY_SECRET=sk_live_your_secret_key
PAYMENT_WEBHOOK_SECRET=whsec_your_webhook_secret
PAYMENT_MERCHANT_ID=your_merchant_id

# Google OAuth (서버 시크릿)
GOOGLE_OAUTH_CLIENT_SECRET=your-production-google-client-secret

# 프로덕션 이메일 서비스
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=noreply@tre-it.com
SMTP_PASS=your-secure-app-password
SMTP_SECURE=true

# 프로덕션 웹훅 URLs
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/PROD/WEBHOOK
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR/PROD/WEBHOOK

# 강력한 보안 설정 (프로덕션용)
JWT_SECRET=your-very-secure-jwt-secret-key-at-least-64-characters-long-for-production
ENCRYPTION_KEY=your-very-secure-encryption-key-32-chars-minimum-for-prod
SALT_ROUNDS=14

# 프로덕션 Rate Limiting (Redis 클러스터)
REDIS_URL=rediss://username:password@your-redis-cluster.com:6380
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_REQUESTS_PER_HOUR=500

# 환경
NODE_ENV=production
PORT=3000

# 프로덕션 로깅 설정
LOG_LEVEL=warn
LOG_FILE_PATH=/var/log/treit-master/production.log

# 프로덕션 모니터링
SENTRY_DSN=https://your-production-sentry-dsn@sentry.io/project
NEW_RELIC_LICENSE_KEY=your-production-newrelic-key

# ===========================================
# 추가 프로덕션 보안 설정
# ===========================================

# SSL/TLS 설정
FORCE_HTTPS=true
HSTS_MAX_AGE=31536000

# 보안 헤더
CSP_POLICY="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';"
X_FRAME_OPTIONS=DENY
X_CONTENT_TYPE_OPTIONS=nosniff

# 세션 보안
SESSION_SECURE=true
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=strict

# CORS 설정
CORS_ORIGIN=https://app.tre-it.com,https://advertiser.tre-it.com,https://admin.tre-it.com
CORS_CREDENTIALS=true

# 백업 및 복구
BACKUP_ENCRYPTION_KEY=your-backup-encryption-key-32-chars
BACKUP_STORAGE_URL=your-secure-backup-storage-url

# 알림 설정
ALERT_EMAIL=admin@tre-it.com
ALERT_PHONE=+82-10-XXXX-XXXX

# CDN 설정
CDN_URL=https://cdn.tre-it.com
STATIC_ASSETS_URL=https://assets.tre-it.com

# ===========================================
# 환경변수 설정 가이드
# ===========================================

# 1. 이 파일을 .env.production으로 복사
# 2. 모든 placeholder 값들을 실제 값으로 교체
# 3. 키와 비밀번호는 충분히 강력하게 설정
# 4. 절대 버전 관리에 실제 키가 포함된 파일을 커밋하지 마세요
# 5. CI/CD 파이프라인에서 환경변수를 안전하게 주입
# 6. 정기적으로 키 로테이션 수행

# 보안 체크리스트:
# □ 모든 프로덕션 키가 설정되었는가?
# □ 개발용 키나 테스트 키가 남아있지 않은가?
# □ HTTPS가 강제로 사용되는가?
# □ 디버그 모드가 비활성화되었는가?
# □ 로그 레벨이 적절히 설정되었는가?